<!DOCTYPE html>
<html>

<head>
    <title>FnS Ventures Attendance</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <h2>FnS Ventures â€“ Employee Attendance</h2>

    <form id="attForm">
        <input type="text" id="empId" placeholder="Employee ID" required><br><br>

        <select id="type" required>
            <option value="">IN / OUT</option>
            <option value="IN">IN</option>
            <option value="OUT">OUT</option>
        </select><br><br>

        <input type="file" id="photo" accept="image/*" capture="camera" required><br><br>

        <button type="submit">Submit</button>
    </form>



    <script>
const scriptURL = "https://script.google.com/macros/s/AKfycbwn8wI_XE5GczMwlVvnm3UDkW_Bo76nLzasYnLZNKfUkmzpP-Gm-gZo1OLc3nSwXXGm/exec";

document.getElementById("attForm").addEventListener("submit", e => {
  e.preventDefault();

  navigator.geolocation.getCurrentPosition(pos => {
    const reader = new FileReader();
    reader.onload = () => {
      fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify({
          empId: empId.value,
          type: type.value,
          photo: reader.result,
          lat: pos.coords.latitude,
          lng: pos.coords.longitude,
          device: navigator.userAgent
        })
      }).then(() => alert("Done"));
    };
    reader.readAsDataURL(photo.files[0]);
  });
});
</script>

</body>

</html>