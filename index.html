<!DOCTYPE html>
<html>
<head>
  <title>FnS Ventures Attendance</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <h2>FnS Ventures â€“ Employee Attendance</h2>

  <form id="attForm">
    <input type="text" id="empId" placeholder="Employee ID" required><br><br>
    <input type="text" id="empName" placeholder="Employee Name" required><br><br>

    <input type="file" id="photo" accept="image/*" capture="camera" required><br><br>

    <button type="submit">Mark Attendance</button>
  </form>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbxIPErVacmv7cxERvlLPfmBvFn9ecSDcuyCYBwoBksc33QUiN6ZXfQ1040QR1gcnAOD/exec";

    document.getElementById("attForm").addEventListener("submit", function(e){
      e.preventDefault();

      navigator.geolocation.getCurrentPosition(function(pos){
        let reader = new FileReader();
        reader.onload = function(){
          fetch(scriptURL, {
            method: "POST",
            body: JSON.stringify({
              empId: empId.value,
              empName: empName.value,
              photo: reader.result,
              lat: pos.coords.latitude,
              lng: pos.coords.longitude,
              address: "",
              device: navigator.userAgent
            })
          }).then(() => alert("Attendance Marked Successfully"));
        }
        reader.readAsDataURL(photo.files[0]);
      });
    });
  </script>
</body>
</html>
